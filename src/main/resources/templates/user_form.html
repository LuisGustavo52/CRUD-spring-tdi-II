<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="~{cabecalho :: head}"></div>
    <title>Formulário de Usuário</title>
</head>
<body>
<div th:replace="~{cabecalho :: navbar}"></div>
<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title" th:text="${user.id == 0 ? 'Novo Usuário' : 'Editar Usuário'}">Formulário</h2>
        </div>
        <div class="card-body">
            <form action="#" method="POST" th:action="@{/users/new}" th:object="${user}">
                <input type="hidden" th:field="*{id}">
                <input type="hidden" th:field="*{address.id}">

                <div class="mb-3">
                    <label for="name" class="form-label">Nome:</label>
                    <input type="text" id="name" th:field="*{name}" class="form-control"
                           th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''">
                    <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="invalid-feedback"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Gênero:</label>
                    <div th:each="g : ${T(br.edu.ifsuldeminas.mch.retromaster.model.entity.User.Gender).values()}" class="form-check form-check-inline">
                        <input type="radio" th:field="*{gender}" th:value="${g}" class="form-check-input" th:id="${g}">
                        <label th:for="${g}" th:text="${g.toString()}" class="form-check-label"></label>
                    </div>
                    <div th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}" class="text-danger" style="font-size: .875em;"></div>
                </div>

                <div class="mb-3">
                    <label for="email" class="form-label">E-mail:</label>
                    <input type="email" id="email" th:field="*{email}" class="form-control"
                           th:classappend="${#fields.hasErrors('email')} ? 'is-invalid' : ''">
                    <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="invalid-feedback"></div>
                </div>
                
                <h5 class="mt-4">Endereço</h5>
                <hr>

                <div class="mb-3">
                    <label for="place" class="form-label">Rua:</label>
                    <input type="text" id="place" th:field="*{address.place}" class="form-control"
                           th:classappend="${#fields.hasErrors('address.place')} ? 'is-invalid' : ''">
                    <div th:if="${#fields.hasErrors('address.place')}" th:errors="*{address.place}" class="invalid-feedback"></div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="number" class="form-label">Número:</label>
                        <input type="number" id="number" th:field="*{address.number}" class="form-control"
                               th:classappend="${#fields.hasErrors('address.number')} ? 'is-invalid' : ''">
                        <div th:if="${#fields.hasErrors('address.number')}" th:errors="*{address.number}" class="invalid-feedback"></div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="zipCode" class="form-label">CEP:</label>
                        <input type="text" id="zipCode" th:field="*{address.zipCode}" class="form-control"
                               th:classappend="${#fields.hasErrors('address.zipCode')} ? 'is-invalid' : ''">
                        <div th:if="${#fields.hasErrors('address.zipCode')}" th:errors="*{address.zipCode}" class="invalid-feedback"></div>
                    </div>
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary">Salvar</button>
                    <a th:href="@{/users}" class="btn btn-secondary">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>